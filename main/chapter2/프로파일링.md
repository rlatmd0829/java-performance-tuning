# 프로파일링 툴이란?

| 구분 | 특징 |
| --- | --- |
| 프로파일링 툴 | - 소스 레벨의 분석을 위한 툴이다. <br> - 애플리케이션의 세부 응답 시간까지 분석할 수 있다. <br> - 자바 기반의 클라이언트 프로그램 분석을 할 수 있다. |
| APM 툴 | - 애플리케이션의 장애 상황에 대한 모니터링 및 문제점 진단이 주 목적이다. <br> - 서버의 사용자 수나 리소스에 대한 모니터링을 할 수 있다. <br> - 자바 기반의 클라이언트 프로그램 분석이 불가능하다. | 

프로파일링툴은 개발자용 툴이고, apm툴은 운영환경용 툴이라고 할 수 있다.

<br>

### 프로파일링 툴이 기본적으로 제공하는 기능은?

- 응답시간 프로파일링 기능

응답 시간 프로파일링을 하는 주된 이유는 응답 시간을 측정하기 위함이다. 하나의 클래스 내에서 사용되는 메서드 단위의 응답 시간을 측정한다.

- 메모리 프로파일링

잠깐 사용하고 GC의 대상이 되는 부분을 찾거나, 메모리 부족현상이 발생하는 부분을 찾기 위함이다. 클래스 및 메서드 단위의 사용량이 분석된다.

<br>

### System 클래스
프로그램 속도를 가장 간단하게 측정할 수 있는 방법은 system 클래스를 사용하면 가장 쉽게 측정할 수 있다.

- currentTimeMills()
현재 시간을 ms로 리턴해준다. (1/1,000초)
- nanoTime()
현재의 시간을 ns로 리턴해준다. (1/1,000,000,000초)

nanoTime() 메서드가 나노 단위의 시간을 리턴해 주기 때문에 currentTimeMills() 메서드보다 정확하다고 생각한다.

<br>

### JMH (java Microbenchmark Harness)
JDK를 오픈소스로 제공하는 OpenJDK에서 만든 성능 측정용 라이브러리이다.

- @BenchmarkMode({ Mode.AverageTime })
해당 어노테이션이 붙은 클래스에 평균 응답 시간을 측정한다.

- @OutputTimeUnit(TimeUnit.MILLISECONDS)
출력되는 시간 단위를 밀리초로 지정한다.

- @GenerateMicroBenchmark
측정 대상이 되는 메서드를 선언할 때 사용한다. 해당 클래스에 메서드가 많이 있더라도 이 어노테이션을 지정하지 않으면 테스트 대상에서 제외된다.
